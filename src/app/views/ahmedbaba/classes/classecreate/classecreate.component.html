<mat-card class="classe-card-modern mat-elevation-z4">
  <!-- En-tête moderne -->
  <mat-card-header class="classe-card-header">
    <div mat-card-avatar class="header-avatar">
      <mat-icon class="avatar-icon">class</mat-icon>
    </div>
    <div class="header-content">
      <mat-card-title class="modern-title">Créer une nouvelle classe</mat-card-title>
      <mat-card-subtitle class="modern-subtitle">
        Renseignez les informations de la classe puis enregistrez
      </mat-card-subtitle>
    </div>
  </mat-card-header>

  <mat-divider class="modern-divider"></mat-divider>

  <mat-card-content class="modern-content">
    <form [formGroup]="classeForm" (ngSubmit)="createClasse()" class="classe-form-modern">
      
      <!-- ========================= -->
      <!-- 1. Informations générales -->
      <!-- ========================= -->
      <section class="form-section">
        <div class="section-header">
          <div class="section-icon">
            <mat-icon>info</mat-icon>
          </div>
          <h3 class="section-title">Informations générales</h3>
        </div>

        <div class="form-grid">
          <!-- Nom de la classe -->
          <div class="form-field-modern">
            <mat-form-field appearance="fill" class="full-width-modern">
              <mat-label>Nom de la classe *</mat-label>
              <mat-icon matPrefix class="field-icon">school</mat-icon>
              <input matInput formControlName="nom" placeholder="Ex: CP A, CE1 B">
              <mat-hint>Doit être unique et descriptif</mat-hint>
            </mat-form-field>
            <div class="error-messages" *ngIf="classeForm.controls['nom'].touched">
              <small class="form-error-msg" *ngIf="classeForm.controls['nom'].hasError('required')">
                ⚠ Le nom est obligatoire
              </small>
              <small class="form-error-msg" *ngIf="classeForm.controls['nom'].hasError('minlength')">
                ⚠ Minimum {{ classeForm.controls['nom'].errors?.minlength.requiredLength }} caractères
              </small>
            </div>
          </div>

          <!-- Description -->
          <div class="form-field-modern full-width">
            <mat-form-field appearance="fill" class="full-width-modern">
              <mat-label>Description *</mat-label>
              <mat-icon matPrefix class="field-icon">description</mat-icon>
              <textarea matInput formControlName="description" rows="3" placeholder="Décrivez les spécificités de cette classe..."></textarea>
              <mat-hint>Caractéristiques particulières ou objectifs pédagogiques</mat-hint>
            </mat-form-field>
            <div class="error-messages" *ngIf="classeForm.controls['description'].touched">
              <small class="form-error-msg" *ngIf="classeForm.controls['description'].hasError('required')">
                ⚠ La description est obligatoire
              </small>
              <small class="form-error-msg" *ngIf="classeForm.controls['description'].hasError('minlength')">
                ⚠ Minimum {{ classeForm.controls['description'].errors?.minlength.requiredLength }} caractères
              </small>
            </div>
          </div>
        </div>
      </section>

      <mat-divider class="modern-divider"></mat-divider>

      <!-- ========================= -->
      <!-- 2. Caractéristiques -->
      <!-- ========================= -->
      <section class="form-section">
        <div class="section-header">
          <div class="section-icon">
            <mat-icon>tune</mat-icon>
          </div>
          <h3 class="section-title">Caractéristiques</h3>
        </div>

        <div class="form-grid">
          <!-- Niveau -->
          <div class="form-field-modern">
            <mat-form-field appearance="fill" class="full-width-modern">
              <mat-label>Niveau *</mat-label>
              <mat-icon matPrefix class="field-icon">grade</mat-icon>
              <mat-select formControlName="niveau">
                <mat-option value="CI">
                  <div class="option-content">
                    <span class="option-text">CI - Cours d'Initiation</span>
                  </div>
                </mat-option>
                <mat-option value="CP">
                  <div class="option-content">
                    <span class="option-text">CP - Cours Préparatoire</span>
                  </div>
                </mat-option>
                <mat-option value="CE1">
                  <div class="option-content">
                    <span class="option-text">CE1 - Cours Élémentaire 1</span>
                  </div>
                </mat-option>
                <mat-option value="CE2">
                  <div class="option-content">
                    <span class="option-text">CE2 - Cours Élémentaire 2</span>
                  </div>
                </mat-option>
                <mat-option value="CM1">
                  <div class="option-content">
                    <span class="option-text">CM1 - Cours Moyen 1</span>
                  </div>
                </mat-option>
                <mat-option value="CM2">
                  <div class="option-content">
                    <span class="option-text">CM2 - Cours Moyen 2</span>
                  </div>
                </mat-option>
              </mat-select>
            </mat-form-field>
            <div class="error-messages" *ngIf="classeForm.controls['niveau']?.touched">
              <small class="form-error-msg" *ngIf="classeForm.controls['niveau']?.hasError('required')">
                ⚠ Le niveau est obligatoire
              </small>
            </div>
          </div>

          <!-- Année scolaire -->
          <div class="form-field-modern">
            <mat-form-field appearance="fill" class="full-width-modern">
              <mat-label>Année scolaire *</mat-label>
              <mat-icon matPrefix class="field-icon">event</mat-icon>
              <input matInput formControlName="anneeScolaire" placeholder="2024-2025">
              <mat-hint>Format: AAAA-AAAA</mat-hint>
            </mat-form-field>
            <div class="error-messages" *ngIf="classeForm.controls['anneeScolaire']?.touched">
              <small class="form-error-msg" *ngIf="classeForm.controls['anneeScolaire']?.hasError('required')">
                ⚠ L'année scolaire est obligatoire
              </small>
            </div>
          </div>

          <!-- Capacité max -->
          <div class="form-field-modern">
            <mat-form-field appearance="fill" class="full-width-modern">
              <mat-label>Capacité maximale</mat-label>
              <mat-icon matPrefix class="field-icon">people</mat-icon>
              <input matInput type="number" min="1" formControlName="capaciteMax" placeholder="30">
              <span matSuffix>élèves</span>
            </mat-form-field>
          </div>

          <!-- Effectif actuel -->
          <div class="form-field-modern">
            <mat-form-field appearance="fill" class="full-width-modern">
              <mat-label>Effectif actuel</mat-label>
              <mat-icon matPrefix class="field-icon">person</mat-icon>
              <input matInput type="number" min="0" formControlName="effectifActuel" placeholder="0">
              <span matSuffix>élèves</span>
            </mat-form-field>
          </div>

          <!-- Régime -->
          <div class="form-field-modern">
            <mat-form-field appearance="fill" class="full-width-modern">
              <mat-label>Régime</mat-label>
              <mat-icon matPrefix class="field-icon">schedule</mat-icon>
              <mat-select formControlName="regime">
                <mat-option value="MATIN">
                  <div class="option-content">
                    <mat-icon>wb_sunny</mat-icon>
                    <span class="option-text">Matin</span>
                  </div>
                </mat-option>
                <mat-option value="APRES_MIDI">
                  <div class="option-content">
                    <mat-icon>brightness_5</mat-icon>
                    <span class="option-text">Après-midi</span>
                  </div>
                </mat-option>
                <mat-option value="JOURNEE_CONTINUE">
                  <div class="option-content">
                    <mat-icon>all_inclusive</mat-icon>
                    <span class="option-text">Journée continue</span>
                  </div>
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <!-- Langue d'enseignement -->
          <div class="form-field-modern">
            <mat-form-field appearance="fill" class="full-width-modern">
              <mat-label>Langue d'enseignement</mat-label>
              <mat-icon matPrefix class="field-icon">translate</mat-icon>
              <input matInput formControlName="langueEnseignement" placeholder="Français, Wolof...">
            </mat-form-field>
          </div>
        </div>
      </section>

      <mat-divider class="modern-divider"></mat-divider>

      <!-- ========================= -->
      <!-- 3. Localisation -->
      <!-- ========================= -->
      <section class="form-section">
        <div class="section-header">
          <div class="section-icon">
            <mat-icon>location_on</mat-icon>
          </div>
          <h3 class="section-title">Localisation</h3>
        </div>

        <div class="form-grid">
          <!-- Salle -->
          <div class="form-field-modern">
            <mat-form-field appearance="fill" class="full-width-modern">
              <mat-label>Salle</mat-label>
              <mat-icon matPrefix class="field-icon">meeting_room</mat-icon>
              <input matInput formControlName="salle" placeholder="Salle 3, Labo info...">
            </mat-form-field>
          </div>

          <!-- Bâtiment -->
          <div class="form-field-modern">
            <mat-form-field appearance="fill" class="full-width-modern">
              <mat-label>Bâtiment</mat-label>
              <mat-icon matPrefix class="field-icon">business</mat-icon>
              <input matInput formControlName="batiment" placeholder="Bloc A, Bâtiment principal...">
            </mat-form-field>
          </div>

          <!-- Étage -->
          <div class="form-field-modern">
            <mat-form-field appearance="fill" class="full-width-modern">
              <mat-label>Étage</mat-label>
              <mat-icon matPrefix class="field-icon">stairs</mat-icon>
              <input matInput type="number" formControlName="etage" placeholder="0">
              <span matSuffix *ngIf="classeForm.get('etage')?.value === 0">RDC</span>
              <span matSuffix *ngIf="classeForm.get('etage')?.value === 1">er étage</span>
              <span matSuffix *ngIf="classeForm.get('etage')?.value > 1">ème étage</span>
            </mat-form-field>
          </div>
        </div>
      </section>

      <!-- Indicateur de progression -->
      <div class="form-progress">
        <div class="progress-steps">
          <div class="progress-step" [class.active]="true">
            <div class="step-number">1</div>
            <span class="step-label">Informations</span>
          </div>
          <div class="progress-step" [class.active]="true">
            <div class="step-number">2</div>
            <span class="step-label">Caractéristiques</span>
          </div>
          <div class="progress-step" [class.active]="true">
            <div class="step-number">3</div>
            <span class="step-label">Localisation</span>
          </div>
        </div>
      </div>

      <!-- ========================= -->
      <!-- 4. Actions -->
      <!-- ========================= -->
      <div class="form-actions-modern">
        <button mat-stroked-button type="button" class="cancel-button" routerLink="/ahmedbaba/classes">
          <mat-icon>arrow_back</mat-icon>
          Annuler
        </button>
        
        <div class="action-buttons">
          <button mat-flat-button type="button" class="preview-button" [disabled]="classeForm.invalid">
            <mat-icon>visibility</mat-icon>
            Aperçu
          </button>
          <button mat-raised-button type="submit" color="primary" class="submit-button" [disabled]="classeForm.invalid">
            <mat-icon>save</mat-icon>
            Créer la classe
          </button>
        </div>
      </div>
    </form>
  </mat-card-content>
</mat-card>