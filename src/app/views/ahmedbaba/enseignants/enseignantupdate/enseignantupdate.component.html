<mat-card class="p-0">
  <mat-card-title>
    <div class="card-title-text">Modifier un enseignant</div>
    <mat-divider></mat-divider>
  </mat-card-title>

  <mat-card-content>
    <form [formGroup]="enseignantForm" (ngSubmit)="submitUpdate()">

      <!-- ✅ IMAGE (champ unique) -->
      <div fxLayout="row" fxLayoutAlign="center center" style="margin-bottom: 20px;">
        <div class="photo-container" (click)="fileInput.click()">

          <!-- IMAGE ACTUELLE OU PREVIEW -->
          <img  
            [src]="previewImage || (apiUrl + '/profile/' + enseignant?.cheminProfil)" 
            alt="photo"
            class="photo-preview"
          />

          <!-- OVERLAY -->
          <div class="photo-overlay">
            Changer la photo
          </div>

        </div>

        <!-- INPUT FILE CACHÉ -->
        <input 
          type="file"
          #fileInput
          id="fileInputHidden"
          (change)="onFileSelected($event)"
          accept="image/*"
          style="display:none"
        />
      </div>

      <!-- CHAMP PRÉNOM + NOM -->
      <div fxLayout="row" fxLayoutGap="16px" fxLayoutAlign="start center">
        <mat-form-field class="full-width">
          <mat-label>Prénom</mat-label>
          <input matInput formControlName="prenom">
        </mat-form-field>

        <mat-form-field class="full-width">
          <mat-label>Nom</mat-label>
          <input matInput formControlName="nom">
        </mat-form-field>
      </div>

      <!-- MATIÈRE + DIPLÔME -->
      <div fxLayout="row" fxLayoutGap="16px" fxLayoutAlign="start center">
        <mat-form-field class="full-width">
          <mat-label>Matière enseignée</mat-label>
          <input matInput formControlName="matiere">
        </mat-form-field>

        <mat-form-field class="full-width">
          <mat-label>Diplôme</mat-label>
          <input matInput formControlName="diplome">
        </mat-form-field>
      </div>

      <!-- ADRESSE + TELEPHONE -->
      <div fxLayout="row" fxLayoutGap="16px" fxLayoutAlign="start center">
        <mat-form-field class="full-width">
          <mat-label>Adresse</mat-label>
          <input matInput formControlName="adresse">
        </mat-form-field>

        <mat-form-field class="full-width">
          <mat-label>Téléphone</mat-label>
          <input matInput formControlName="telephone">
        </mat-form-field>
      </div>

      <!-- BOUTON -->
      <div style="text-align:right; margin-top:20px;">
        <button mat-raised-button color="primary" type="submit" [disabled]="enseignantForm.invalid || submitting">
          <mat-spinner *ngIf="submitting" [diameter]="24" style="margin-right:8px;"></mat-spinner>
          Enregistrer
        </button>
      </div>

    </form>
  </mat-card-content>
</mat-card>
