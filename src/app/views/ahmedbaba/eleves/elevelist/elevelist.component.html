<div class="students-grid">
  <div
    *ngFor="let eleve of listStudents"
    class="student-card-wrapper">

    <mat-card class="student-card-modern">
      <!-- Header de la carte -->
      <div class="card-header-modern">
        <div class="student-avatar">
          <img 
            [src]="apiUrl + eleve.imageUrl" 
            [alt]="eleve.nom"
            class="avatar-image"
            (error)="handleImageError($event)">
          <div class="online-indicator"></div>
        </div>
        
        <div class="student-info">
          <h3 class="student-name">{{ eleve.prenom }} {{ eleve.nom }}</h3>
          <span class="student-matricule">{{ eleve.matricule }}</span>
        </div>

        <button 
          mat-icon-button 
          class="menu-button"
          [matMenuTriggerFor]="eleveMenu">
          <mat-icon class="menu-icon">more_vert</mat-icon>
        </button>
      </div>

      <!-- Menu d'actions -->
      <mat-menu #eleveMenu="matMenu" class="action-menu">
        <button 
          mat-menu-item 
          class="menu-item"
          [routerLink]="['/ahmedbaba/eleves/profile/', eleve.id]">
          <mat-icon class="menu-item-icon">visibility</mat-icon>
          <span>Voir le profil</span>
        </button>
        <button mat-menu-item class="menu-item">
          <mat-icon class="menu-item-icon">edit</mat-icon>
          <span>Modifier</span>
        </button>
        <mat-divider class="menu-divider"></mat-divider>
        <button mat-menu-item class="menu-item delete">
          <mat-icon class="menu-item-icon">archive</mat-icon>
          <span>Archiver</span>
        </button>
      </mat-menu>

      <!-- Contenu de la carte -->
      <mat-card-content class="card-content-modern">
        <div class="info-grid">
          <div class="info-item">
            <div class="info-icon">
              <mat-icon>cake</mat-icon>
            </div>
            <div class="info-content">
              <span class="info-label">Date de naissance</span>
              <span class="info-value">{{ eleve.date_naissance | date:'dd/MM/yyyy' }}</span>
            </div>
          </div>

          <div class="info-item">
            <div class="info-icon">
              <mat-icon>phone</mat-icon>
            </div>
            <div class="info-content">
              <span class="info-label">Téléphone</span>
              <span class="info-value">{{ eleve.telephone || 'Non renseigné' }}</span>
            </div>
          </div>

          <div class="info-item">
            <div class="info-icon">
              <mat-icon>location_on</mat-icon>
            </div>
            <div class="info-content">
              <span class="info-label">Adresse</span>
              <span class="info-value">{{ eleve.adresse || 'Non renseignée' }}</span>
            </div>
          </div>

          <div class="info-item">
            <div class="info-icon">
              <mat-icon>badge</mat-icon>
            </div>
            <div class="info-content">
              <span class="info-label">N° d'enregistrement</span>
              <span class="info-value registration-number">{{ eleve.registrationNu }}</span>
            </div>
          </div>
        </div>
      </mat-card-content>

      <!-- Footer de la carte -->
      <mat-card-actions class="card-actions-modern">
        <button 
          mat-stroked-button 
          class="action-button profile"
          [routerLink]="['/ahmedbaba/eleves/profile/', eleve.id]">
          <mat-icon>person</mat-icon>
          Profil
        </button>
        <button 
          mat-raised-button 
          class="action-button contact"
          color="primary">
          <mat-icon>message</mat-icon>
          Contacter
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>